{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap e7c4173ecefd16aaca01","webpack:///./kit.jsx","webpack:///./requests/mira_resource_response.jsx","webpack:///./requests/mira_web_resource.jsx","webpack:///./requests/mira_resource.jsx","webpack:///./foundation/uuid.jsx","webpack:///./foundation/message_courier.jsx","webpack:///./requests/mira_file_resource.jsx","webpack:///./foundation/url.jsx"],"names":[],"mappings":"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","file":"bundle.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"MiraKit\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"MiraKit\"] = factory();\n\telse\n\t\troot[\"MiraKit\"] = factory();\n})(this, function() {\nreturn \n\n\n/** WEBPACK FOOTER **\n ** webpack/universalModuleDefinition\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap e7c4173ecefd16aaca01\n **/","// MARK: Imports\nimport MiraResourceResponse from './requests/mira_resource_response.jsx';\nimport MiraWebResource from './requests/mira_web_resource.jsx';\nimport MiraFileResource from './requests/mira_file_resource.jsx';\n\n// internal\nimport MessageCourier from './foundation/message_courier.jsx';\nimport URL from './foundation/url.jsx';\n\n\n// MARK: Constants\nconst Internal = {\n  MessageCourier,\n  URL,\n};\n\n\n// MARK: Exports\nexport {\n  MiraResourceResponse,\n  MiraWebResource,\n  MiraFileResource,\n\n  Internal,\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./kit.jsx\n **/","class MiraResourceResponse {\n  // MARK: Properties\n  headers: Object\n  didRedirect: boolean\n  statusCode: number\n  url: string\n  raw: ArrayBuffer\n\n  // MARK: Constructors\n  constructor(\n    headers: Object,\n    didRedirect: boolean,\n    statusCode: number,\n    url: string,\n    raw: ArrayBuffer\n  ) {\n    this.headers = headers;\n    this.didRedirect = didRedirect;\n    this.statusCode = statusCode;\n    this.url = url;\n    this.raw = raw;\n  }\n\n  // MARK: Accessors\n  text(): ?string {\n    return String.fromCharCode.apply(null, new Uint8Array(this.raw));\n  }\n\n  json(): ?Object {\n    return JSON.parse(this.text());\n  }\n\n  blob(): ?Blob {\n    return new Blob([this.raw], {type: this.headers[\"content-type\"]});\n  }\n}\n\n\n// MARK: Exports\nexport default MiraResourceResponse;\n\n\n\n/** WEBPACK FOOTER **\n ** ./requests/mira_resource_response.jsx\n **/","// MARK: Imports\nimport MiraResource from './mira_resource.jsx';\n\n\nclass MiraWebResource extends MiraResource {\n  // MARK: Fetch Handlers\n  get = this.request('GET');\n  post = this.request('POST');\n  put = this.request('PUT');\n  delete = this.request('DELETE');\n  head = this.request('HEAD');\n}\n\n\n// MARK: Exports\nexport default MiraWebResource;\n\n\n\n/** WEBPACK FOOTER **\n ** ./requests/mira_web_resource.jsx\n **/","// MARK: Imports\nimport uuid from '../foundation/uuid.jsx';\nimport MiraResourceResponse from './mira_resource_response.jsx';\nimport MessageCourier from '../foundation/message_courier.jsx';\n\n\n// MARK: Types\ntype HTTPMethodType = 'GET' | 'POST' | 'PUT' | 'DELETE' | 'HEAD';\n\n\nclass MiraResource {\n  // MARK: Properties\n  url: string\n  resourceId: string\n\n  // MARK: Constructors\n  constructor(url: string) {\n    this.url = url;\n    this.resourceId = uuid.v4();\n\n    // bind responders\n    this.onResponse = this.onResponse.bind(this);\n  }\n\n  // MARK: Request Handlers\n  request(method: HTTPMethodType): (\n    queryParams?: Object,\n    bodyPayload?: Object,\n    headers?: Object,\n    allowRedirects?: boolean\n  ) => Promise<MiraResourceResponse> {\n    return (\n      queryParams?: Object,\n      bodyPayload?: Object,\n      headers?: Object,\n      timeout?: number,\n      allowRedirects?: boolean\n    ) => {\n      return MessageCourier.defaultCourier().sendMessage('fetch', {\n        resourceId: this.resourceId,\n        method: method,\n        url: this.url,\n        queryParams: queryParams || {},\n        bodyPayload: bodyPayload || {},\n        headers: headers || {},\n        allowRedirects: allowRedirects || false\n      }).then(this.onResponse);\n    };\n  }\n\n  // MARK: Response Handlers\n  onResponse(value: Object): MiraResourceResponse {\n    return new MiraResourceResponse(\n      value.headers,\n      value.didRedirect,\n      value.statusCode,\n      value.url,\n      value.raw\n    );\n  }\n}\n\n\n// MARK: Exports\nexport default MiraResource;\n\n\n\n/** WEBPACK FOOTER **\n ** ./requests/mira_resource.jsx\n **/","class uuid {\n  // MARK: Generators\n  static v4(): string {\n    return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, (c) => {\n      let r = Math.random()*16|0, v = c == 'x' ? r : (r&0x3|0x8);\n      return v.toString(16);\n    });\n  }\n}\n\n\n// MARK: Exports\nexport default uuid;\n\n\n\n/** WEBPACK FOOTER **\n ** ./foundation/uuid.jsx\n **/","// MARK: Imports\nimport uuid from './uuid.jsx';\n\n\n// MARK: Types\ntype MessageResponderType = (payload: Object) => (Promise<Object> | void);\n\n\nclass MessageCourier {\n  // MARK: Properties\n  localWindow: Window\n  remoteWindow: Window\n\n  pendingResponses: { [key: string]: [Function, Function] } = {}\n  subscribers: { string: Array<MessageResponderType> } = {}\n\n  static __defaultCourier: MessageCourier\n\n  // MARK: Constructors\n  constructor(localWindow: Window, remoteWindow: Window) {\n    this.localWindow = localWindow;\n    this.remoteWindow = remoteWindow;\n\n    // bind & attach responders\n    this.onWindowMessage = this.onWindowMessage.bind(this);\n    this.localWindow.addEventListener('message', this.onWindowMessage, false);\n  }\n\n  static defaultCourier() {\n    if (MessageCourier.__defaultCourier === undefined) {\n      MessageCourier.__defaultCourier = new MessageCourier(\n        window,\n        window.parent\n      );\n    }\n\n    return MessageCourier.__defaultCourier;\n  }\n\n  // MARK: Message Handlers\n  subscribeToMessage(messageName: string, responder: MessageResponderType) {\n    this.subscribers[messageName] = this.subscribers[messageName] || [];\n    this.subscribers[messageName].push(responder);\n  }\n\n  sendMessage(messageName: string, payload: Object): Promise<Object> {\n    const requestId = uuid.v4();\n    return new Promise((resolve: Function, reject: Function) => {\n      this.pendingResponses[requestId] = [resolve, reject];\n      this.remoteWindow.postMessage({\n        requestId: requestId,\n        messageName: messageName,\n        payload: payload\n      }, '*');\n    });\n  }\n\n  // MARK: Responders\n  onWindowMessage(event: Event) {\n    if (event.data.responseId !== undefined) {\n      if (this.pendingResponses[event.data.responseId] === undefined) {\n        return;\n      }\n\n      const resolve = this.pendingResponses[event.data.responseId][0];\n      const reject = this.pendingResponses[event.data.responseId][1];\n      this.pendingResponses[event.data.responseId] = undefined;\n\n      if (event.data.error !== undefined) {\n        reject(event.data.error);\n        return;\n      }\n\n      resolve(event.data.payload);\n      return;\n    } else if (event.data.messageName !== undefined) {\n      const subscribers = this.subscribers[event.data.messageName];\n      if (subscribers === undefined) {\n        return;\n      }\n\n      subscribers.forEach((responder: MessageResponderType) => {\n        const promise = responder(event.data.payload);\n        if (promise === undefined) {\n          this.remoteWindow.postMessage({\n            responseId: event.data.requestId,\n            payload: {}\n          }, '*');\n          return;\n        }\n\n        promise.then((payload: Object) => {\n          this.remoteWindow.postMessage({\n            responseId: event.data.requestId,\n            payload: payload\n          }, '*');\n        });\n      });\n\n      return;\n    }\n  }\n}\n\n\n// MARK: Exports\nexport default MessageCourier;\n\n\n\n/** WEBPACK FOOTER **\n ** ./foundation/message_courier.jsx\n **/","// MARK: Imports\nimport MiraResource from './mira_resource.jsx';\nimport MessageCourier from '../foundation/message_courier.jsx';\n\n\nclass MiraFileResource extends MiraResource {\n  // MARK: Constructors\n  constructor(propertyName: string) {\n    super('');\n    this.propertyName = propertyName;\n  }\n\n  // MARK: Fetch Handlers\n  get(): Promise<MiraResourceResponse> {\n    return MessageCourier.defaultCourier().sendMessage('fetch-file', {\n      resourceId: this.resourceId,\n      method: 'GET',\n      propertyName: this.propertyName\n    }).then(this.onResponse);\n  }\n}\n\n\n// MARK: Exports\nexport default MiraFileResource;\n\n\n\n/** WEBPACK FOOTER **\n ** ./requests/mira_file_resource.jsx\n **/","class URL {\n  // MARK: Properties\n  _urlString: string\n\n  protocol: string\n  hostname: string\n  port: number\n  pathname: string\n  query: string\n  hash: string\n  host: string\n\n  // MARK: Constructors\n  constructor(url: string) {\n    this._urlString = url;\n    const domElement = document.createElement('a');\n\n    this.protocol = domElement.protocol;\n    this.hostname = domElement.hostname;\n    this.port = domElement.port;\n    this.pathname = domElement.pathname;\n    this.query = domElement.search;\n    this.hash = domElement.hash;\n    this.host = domElement.host;\n  }\n}\n\n\n// MARK: Exports\nexport default URL;\n\n\n\n/** WEBPACK FOOTER **\n ** ./foundation/url.jsx\n **/"],"sourceRoot":""}